
## Docker命令格式  
  
**Docker命令** 的 **语法结构**
```  
docker 子命令 [选项]  
```  
  
docker都 **有哪些子命令** 呢，我们可以使用docker的helper子命令查看
```  
docker --help
```  
  
如果想 **查询具体的子命令** 的使用方式  
```  
docker 子命令 --help
```  
例如：
我们*最常用的子命令之一*：启动docker容器的run的相关帮助
```  
docker run --help  
```  
  
当然也可以查询官方文档或百度了解更多内容  
https://docs.docker.com/reference/


## images命令  
  
docker images命令主要能够完成 **查看当前 本地镜像仓库** 的功能  
  
```  
docker images
```  
  
这个命令的返回结果显示：  
- REPOSITORY：镜像仓库名，也叫作镜像名。  
- TAG：标签，常用版本号标识仓库，如果是latest就是最新版本。  
- IMAGE ID：镜像id。  
- CREATED：创建镜像时间。  
- SIZE：大小。  
  
docker images命令的 **常用选项** 如下  
- `-a`：显示所有信息  
- `-q`：只显示镜像id,在镜像较多的时候比较常用


## search命令  

在拉取镜像之前，我们 *要先明确* **正确的镜像名称**
  
我们可以输入查询关键字，对镜像仓库进行搜索。
  
search命令，可以搜索 *当前系统绑定的* **远程镜像服务器中的内容**
```  
docker search mysql  
```  
  
这个命令的返回结果显示：  
- NAME：镜像名称。  
- DESCRIPTION：镜像描述。  
- STARS：镜像星级，*越高表示越热门*，使用人越多。  
- OFFICIAL：是否官方镜像。  
- AUTOMATED：是否支持自动化部署。


## pull命令  
  
根据我们上面搜索得到的结果，*确认 镜像名称 关键字之后*。
  
我们就可以使用pull命令将我们 *查询出的软件* **拉取到本地仓库** 了  
```  
docker pull [镜像名称]  
```  
例如：
```  
docker pull mysql  
```  
  
*默认下载 最新版本*
  
如果要 **指定版本号** 可以在名称后指定：
```  
docker pull mysql:5.7.35  
```  
  
至于要指定的版本号有什么
可以在相关的官方网站查询


## rmi命令  
  
**删除本地镜像的命令**
  
一般当本地镜像较多，过多的占用空间时，可以删除一些不会再使用的镜像文件，节省空间。

删除镜像 *需要明确镜像的id*，所以一般都会 *配合docker images使用*。
  
**rmi**：**r**e**m**ove **i**mage  

例如：
```  
docker rmi feb5d9fea6a5
```  
  
如果当前 *要删除的镜像* **有容器正在运行**，使用上面命令 *删除会有报错*
  
意思就是正在使用的镜像无法删除，
我们如果需要 **强制** 将当前镜像 **删除**，*并* 同时 **停止这个服务** 的话，就需要加 `-f` 选项  

例如：
```  
docker rmi feb5d9fea6a5 -f  
```  
  
rmi命令的 **选项**：
- `-f`：*强制删除* 这个镜像，无论是否正在使用。


## run命令  
  
docker run命令，可以 **指定 当前本地镜像文件 启动**，
  
启动镜像文件会 *在Docker中生成 新的容器*，容器中 *来运行镜像中包含的软件*。
  
docker run的命令，选项比较多：例如设置端口号，设置运行模式，调整运行参数，运行位置等。
  
最后的mysql是镜像名称默认最新版，如果需要指定版本号可以编写下面代码：
```  
docker run --name mysql -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -v /root/data:/var/lib/mysql mysql:5.7.35  
```  
  
- `--name mysql`：该容器启动后的名字：（自定义命名）如果没有设置，系统会自动设置一个，毕竟如果开启太多的容器，记不住就很尴尬，建议加上见名知意。  

- `-d` 代表后台启动该服务  

- `-p 3306`（这是 *liunx的端口号*，我习惯说成宿主机，如果我们想要 *远程服务* 的话，*访问的端口就是这个端口* ）`:3306`（*docker容器的端口*，每一个容器都是独立的，可理解成操作系统层面的系统），访问这个端口就是 *先通过远程访问宿主机的端口*，*再映射到docker容器的端口* **访问mysql**。  

- `-e MYSQL_ROOT_PASSWORD=root` 这是说 *mysql启动* 需要的*开机密码*，**默认的账号** 是**root** ，密码就是上面设置的：root

- `-v /root/data:/var/lib/mysql`：这是 *宿主机的数据存放路径*（你也可以自定义），
    - `/var/lib/mysql`：这是*mysql容器存放数据的地方*。也是 **为了同步数据**，防止，容器被删除以后，数据就不存在了。  

- *启动成功后就返回一个容器ID（UUID值）*。
  
启动之后，我们就 *可以* **使用数据库连接工具** *访问数据库* 了。


## 课上作业  
  
根据上面所学内容，将redis在docker中启动  
  
docker search 搜索"redis"
  
拉取镜像参考之前的笔记  
```  
docker pull redis
```  
  
**docker启动Redis的命令**  
```  
docker run -itd --name redis-test -p 6379:6379 redis
```  
  
启动之后可以本地访问客户端  
```  
docker exec -it redis-test redis-cli
```

##  ps命令

```
docker ps
```

可以查看当前docker中 **正在运行的 所有容器的id**。

**ps命令显示的标题内容如下**  
- container id：容器id，很多操作容器命令都需要用到的参数。  
- image：容器创建使用的镜像。  
- command：容器中在运行的进程或者命令。  
- created：创建时间。  
- status：容器状态。  
- ports：容器的端口映射情况，这里没有用到端口。  
- names：容器的名字，启动没有指定--name选项，会默认使用一个名字。  
  
**ps命令中常见的选项如下：**  
- `-a`：显示 *所有容器*，如果不加只显示正在启动运行的容器，停止的不会显示。  
- `-l`：显示 *最近的启动创建的容器*。  
- `-n=[数字]`：显示 *最近n个容器*。  
- `-q`：*只显示容器id*。经常和-a一起使用，获得当前宿主机所有容器id参数集合。


## stop / rm命令  
  
docker stop 可以停止正在运行的容器  
  
stop*只是停止容器*，*并不会删除容器*。
  
如果想*删除容器 需要使用rm命令*。
  
注意：**这里rm删除的是容器，不是本地镜像，和rmi命令要区分**  
  
首先使用docker ps命令查询所有正在运行的容器
```
docker stop [容器id]
```

```
docker rm [容器id]
```
  
**rm的选项** 有：
- `-f`：强制删除容器，无论是否运行都可以删除该容器，如果不加，运行的容器无法删除。