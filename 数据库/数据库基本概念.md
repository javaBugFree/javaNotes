 

### 数据库

- **DB**：*DataBase（数据库）*，存放数据的仓库。

- 之前我们项目中将用户信息写入一个文件，最终用一个目录users保存所有的用户信息，这个users目录就可以成为时一个数据库。利用文件系统进行操作。
  - 经常以手动或半自动形式维护数据的操作，*缺点:低效*。



### 数据库管理系统

- *一般说 数据库 说的就是 数据库管理系统和数据库的统称*

- **DBMS**（*数据库管理系统*）。可独立运行的软件，用于维护数据的操作。

- **常见的DBMS有：**
  - mysql（开源）
  - Oracle
  - db2
  - sqlServer



#### 如何操作 DBMS

- **所有的DBMS都支持通过SQL语句进行操作**。我们 向数据库发送特定的SQL语句来 表达要进行某项操作。

- **SQL**：(STRUCTURED  QUERY  LANGUAGE)      *结构化查询语言*
- SQL有**标准**：*SQL92*.
- *所有的DBMS都支持SQL92标准*。

- 有的SQL并不遵循该标准（各个公司自己的数据库），这就是*方言*。



### 连接数据库的方式

1. *命令行形式(cmd )*
   - 查看数据库：show databeses; 
2. *第一方或第三方提供的图形化界面的客户端*
   - MariaDB
3. *在集成环境中*
   - IDEA,Eclipse
4. *JDBC（Java  数据库连接）*，Java程序中若需要使用数据库则这样连接(IDEA,Eclipse都采取这种方式)

![[数据库的交互形式.png]]



### 数据库与表的概念

- **以Mysql为例：**
  - 我们可以*在Mysql中创建若干个数据库*，*每个数据库用于一个项目*。
    - 每个*数据库又可以创建多个表*，*表是用来存储数据的*.
    - 示意图：

![[存储数据的方式.png]]


 - **数据表是由  *行和列*  构成，其中：**
    - *列*：被称为*字段*，就是*一组数据中  各部分信息*。
    - *行*：被称为*记录*，就是*各部分信息组成的  一条数据*。
    
    - 注:用面向对象的角度思考:
        - 表相当于是：一个java类。比如User类。
        - 字段相当于是：类中的属性。比如User类中有username,password,nickname三个属性。
        - 记录相当于是：类的一个实例。比如一个User实例就可以表示一个用户信息
   
    - 示意图：
    
	![[数据表.png]]



### 数据库常用的数据类型

- **不同的数据库数据类型不完全一致**

- **数字类型**
    - *整数类型：* INT(m) 和 BIGINT(m)、TINYINT(m)
        - m ：整数的位数。
        - 例：
            - INT(5)：最大保存一个五位整数。
                - 若保存的数字为18，实际存的时候*前面会补0*，00018。
            - BIGINT(10)：相当于**long**。
            - tinyint(3)：相当于**byte**。
                - 大部分用来表示*状态*。
        - 注：当 *保存的数字长度超过指定长度*，则会*报错*。
        - *标准*：不论什么表的 **id**，都使用 **BIGINT**。
        
    - *浮点类型：* DOUBLE(m,n)
        - m：数字的位数。
        - n：小数部分的位数。
        - *m包含n*。
            - 例：DOUBLE(5,3)，该数字总共5位，其中3位小数（意味着整数位2位）。
               最大保存的数字为：99.999。
            - 注：当*保存的数字精度超过保存精度时*，会进行*四舍五入*。
                - 但是当*最大值*需要*四舍五入*时，此时会*报错*：值超出了范围。
            - 例如：
                ```sql
                例如person表中salary字段的类型：DIUBLE(7,4)
                INSERT INTO person(salary) VALUE(553.12568)
                // 实际salary保存的数字为：553.1257
                ```


- **字符类型**
    - *定长字符：* CHAR(n)
        - n：表示长度，单位是*字符*。
        - 例：name  CHAR(10)：name可以保存10个字符。
        - 注：*最大值为255个字符*。
        - 表中该字符保存数据时，实际在磁盘中保存数据一定是 *指定长度的字符* 。当*实际保存的字符不足*时会*补充空格*来保存长度。
            - 例如：name插入数据时为 ' 张三 ' 。那么实际存储时后面还有8个空格要占够10个字符。 
            - *优点：* 每条记录*占用的字节长度时固定的*，这对于数据库扫描磁盘来说，*查询数据时效率高*。
            - *缺点：* 可能会浪费磁盘空间。
        - *什么时候用：* 如果存储的*字符串长度 几乎相等*，使用 CHAR 定长字符串类型。
    
    - *变长字符：* VARCHAR(n)
        - n：表示长度，单位是*字节*。
        - 注：*最大值为65535个字节*。
        - 一般定义时分为几个*档次*：
            - varchar(50)、varchar(255)、varchar(500).......
        - 表中该字段保存数据时，实际在磁盘中保存数据 *用多少占多少字节*。
            - 例如：name  VARCHAR(30)。插入数据时name为 ' 张三 ' ，实际存储时磁盘中仅6个字节。
            - *优点*：不浪费磁盘空间。
            - *缺点*：每个字符长度都不一样，所以要挨个字节读取，因此*读取效率低*。


- **日期类型**
    - *DATE：* 仅能保存 *年月日*。
    - *TIME：* 仅能保存 *时分秒*。
    - *DATATIME：* 保存 *年月日时分秒*。
    - *TIMESTAMP：* *时间戳*，记录*UTC时间*（自1970-01-01 00:00:00到表达的时间所经过的毫秒）
    - 例：
        - 准备一张表测试各种类型
        ```sql
        CREATE TABLE userinfo(
	        id INT,
	        username VARCHAR(30),
	        gender CHAR(1),
	        birth DATETIME,
	        salary DOUBLE(7,2)
        )
	    ```
	
    - *插入日期*
        - 插入日期时，*可以以字符串形式插入*，*格式为："yyyy-MM-dd hh:mm:ss"*。
          注：MM表示两位数字的月，mm表示两位数字的分
            - 例：
            ```sql
            INSERT INTO userinfo(id,username,gender,birth,salary)
            VALUES(1,'张三','男','2001-02-03 12:22:55',5000.99);
            ```
        
        - 插入日期时，*如果类型为DATETIME*，插入字符串中*可以不指定 时分秒，但不能忽略年月日*.
            - 例：
            ```sql
            INSERT INTO userinfo(id,user,gender,birth,salary)
            VALUES(2,'李四','女','1998-08-24',6000);
            此时时分秒都为0
            
            INSERT INTO userinfo(id,username,gender,birth,salary)  
            VALUES (3,'王五','男','12:15:32',5000)  
            会报错，DATETIME字段不能只插入时分秒
            ```


