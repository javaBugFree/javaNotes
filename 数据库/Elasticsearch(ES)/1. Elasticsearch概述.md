
## Elasticsearch下载

苍老师网站：
![[Elasticsearch下载.png]]
  
官方下载链接：
https://www.elastic.co/cn/downloads/past-releases#elasticsearch


## 什么是 Elasticsearch

elastic：富有弹性的
search：搜索
  
我们可以把它 *简称为ES*，但是搜索它的资料时(例如百度)还是使用Elasticsearch 进行搜索更准确  
  
**这个软件不再是SpringCloud提供的，它也不针对微服务环境的项目来开发。**
  
Elasticsearch和 redis / mysql 一样，*不仅服务于java语言，其它语言也可以使用*。

它的功能也类似一个数据库，能高效的 **从大量数据中** *搜索匹配指定关键字的内容*。
  
它也将数据保存在 **硬盘** 中。
  
这样的软件有一个名称 **全文搜索引擎**。
  
它 *本质就是一个java项目*，使用它 **进行 数据的 增删改查** 就是 *访问* 这个*项目的* **控制器方法**(*url路径*)。

> ES的 *底层技术*：
> ES使用了 *java* 的一套名为 **Lucene** 的 *API*

这个API *提供了* 全文搜索引擎 *核心操作的接口*，相当于搜索引擎的 **核心支持**，ES是 *在Lucene的基础上* 进行了 *完善*，实现了 **开箱即用** 的搜索引擎软件。（类似于 电脑整机 和 CPU 的关系）
  
市面上和ES功能类似的软件有：
Solr(活跃于16、17年) / MongoDB(性能均衡，多用于大数据)


## 为什么需要 Elasticsearch

数据库进行 **模糊查询** *效率严重低下*。
所有*关系型数据库*都有这个缺点（mysql / mariaDB / oracle / DB2等）

在执行类似下面模糊查询时：
```sql
SELECT * From spu WHERE spu_name LIKE '%鼠标%'
```
测试证明，*一张千万级别的数据表 进行模糊查询需要20秒以上*。

当前互联网项目要求 “三高” 的需求下，这样的效率肯定不能接受，
*Elasticsearch* 主要是 *为了解决* **数据库 模糊查询 性能低下问题** 的。

ES进行优化之后，从同样数据量的ES中查询相同条件数据，效率能够提高100倍以上。 



## 数据库索引

[[数据库索引]]


## Elasticsearch 运行原理

要想使用ES提高模糊查询效率：
首先，要将 *数据库中的数据* **复制到ES**（两份，数据不共享） 中，

在 *新增数据* 到ES的 *过程中*，ES可以 *对指定的列/字段的数据* 进行 ***分词***，然后索引保存在索引库中，形成 **倒排索引结构**（*通过分词找到数据id*）。

![[Elasticsearch 分词原理.png]]


## Elasticsearch 的启动

课程中使用7.6.2的版本
压缩包280M左右，解压到没有中文，没有空格的目录下

1. **双击 / 以管理员方式运行** *bin / elasticsearch.bat* **运行！**
![[Elasticsearch的启动1.png]]

双击/以管理员方式运行 之后 稍等一会 可能会看到下面的*dos界面*：
![[Elasticsearch的启动2.png]]

这个**界面不能关闭**，一旦关闭ES就停止了。
  

2. *验证ES的运行状态*

浏览器输入地址： http://localhost:9200

看到如下内容即可：
![[Elasticsearch的启动3.png]]

3. *不同系统启动*：

mac系统启动：
```  
tar -xvf elasticsearch-7.6.2-darwin-x86_64.tar.gz cd elasticsearch-7.6.2/bin ./elasticsearch  
```  
  
linux：
```  
tar -xvf elasticsearch-7.6.2-linux-x86_64.tar.gz  
cd elasticsearch-7.6.2/bin  
./elasticsearch  
```