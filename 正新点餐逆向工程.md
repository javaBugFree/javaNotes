# 正新点餐反向工程

## 交互图

![jht](正新点餐反向工程.assets/jht.png)

## 业务功能概述

### 用户端

1. 成为会员
   1. 微信一键登录，获取微信信息
   2. 保障账户安全，绑定手机号
2. 开始点餐
   1. 选择门店
   2. 选择商品
   3. 选择规格和数量
   4. 加入购物车
   5. 去买单
   6. 选择红包/优惠券
   7. 支付
   8. 堂食/自提/配送
3. 查看订单
   1. 全部
   2. 待自提
   3. 待配送
   4. 配送中
4. 我的
   1. 优惠券兑换
   2. 我的优惠券
   3. 我收藏的店铺

### 管理端

...待完善

## 设计数据库

### 会员等级

1. 主键
2. 会员卡号
3. 等级名称
4. 折扣
5. 会员服务说明

### 用户表

1. 主键
2. 微信openid（唯一标识）
3. 微信昵称
4. 微信头像
5. 手机号
6. 身份二维码
7. 会员等级ID（与会员等级关系为 多对一）

### 用户收货地址

1. 主键
2. 用户ID（与用户关系为 多对一）
3. 收货人姓名
4. 收货人电话
5. 收货人地址
6. 是否为默认地址

### 轮播图

1. 主键
2. 轮播图片
3. 跳转链接
4. 排序序号
5. 是否在首页显示

### 门店

1. 主键
2. logo图片
3. 门店名称
4. 营业时间
5. 门店状态（营业中/可点餐，停止营业）
6. 商家电话
7. 商家地址
8. 坐标经度
9. 坐标纬度
10. 配送范围（单位km）

### 产品分类

1. 主键
2. 上级分类ID（形成多级分类关系）
3. 分类名称
4. 分类图片
5. 排序序号（数字越小越靠前）

### 规格组

1. 主键
2. 规格组名称

### 规格参数

1. 主键
2. 规格组ID（与规格组关系为 多对一）
3. 参数名称
4. 是否为数字参数
5. 单位名称（为数字参数时，指定单位）
6. 是否为通用参数
7. 是否为可搜索参数
8. 参数值

### 产品SPU

1. 主键
2. 分类ID（与产品分类关系为 多对一）
3. 规格组ID（与规格组关系为 多对一）
4. 标题
5. 副标题
6. 卖点/标签
7. 是否上架

### 商品SKU

1. 主键
2. 产品ID（与产品SPU关系为 多对一）
3. 商品标题
4. 商品图片（json格式，如：`["1.jpg","2.jpg",...]`）
5. 价格
6. 划线价格
7. 规格参数（json格式，如：`{"规格":"份","口味":"微辣",...}`）
8. 是否上架

### 门店商品库存

1. 门店ID
2. 商品ID
3. 库存数量
4. 库存单位

> `门店ID` 与 `商品ID` 为复合主键

### 购物车

1. 主键
2. 用户ID
3. 商品ID
4. 门店ID
5. 购买数量

> `用户ID` 与 `商品ID` 为复合主键

### 订单

1. 主键
2. 门店ID
3. 用户ID
4. 收货地址ID
5. 优惠券ID
6. 订单编号
7. 订单类型（堂食，自提，配送）
8. 优惠金额
9. 配送费
10. 总金额
11. 支付方式（1借记卡，2信用卡，3微信，4支付宝，5现金）
12. 支付时间
13. 状态（1未付款，2已付款，3待自提，4待配送，5配送中，6已完成）
14. 下单时间
15. 预约提货时间
16. 订单备注

### 订单详情

1. 订单ID
2. 商品ID（SKU_ID）
3. 原价格
4. 实际购买价
5. 购买数量

> `订单ID` 与 `商品ID` 为复合主键

### 优惠券

1. 主键
2. 优惠券名称
3. 满减门槛（如：订单满多少钱可以使用）
4. 优惠额度
5. 发放数量
6. 已领取数
7. 起始日期
8. 截止日期
9. 使用说明

### 用户优惠券

1. 主键
2. 用户ID
3. 优惠券ID
4. 领取时间
5. 状态（1未使用；2已使用；3已过期；4已作废）
6. 使用时间

### 用户门店收藏

1. 主键
2. 用户ID
3. 门店ID
4. 收藏时间

## 技术选型

...

## 开发与测试

...