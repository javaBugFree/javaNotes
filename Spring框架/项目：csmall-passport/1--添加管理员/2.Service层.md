
AdminService接口：
```java
/**  
 * 处理管理员的业务接口  
 */  
@Transactional  
public interface AdminService {  
  
    /**  
     * 添加管理员  
     *  
     * @param adminAddNewDTO 管理员数据  
     */  
    void addNew(AdminAddNewDTO adminAddNewDTO);  
  
}
```

AdminServiceImpl实现类：
```java
@Slf4j  
@Service  
public class AdminServiceImpl implements IAdminService {  
  
    public AdminServiceImpl() {  
        log.debug("创建业务类对象：AdminServiceImpl");  
    }  
  
    // 复制ServiceCode  
    // 复制ServiceException  
  
    @Override  
    public void addNew(AdminAddNewDTO adminAddNewDTO) {  
        // 从参数对象中获取管理员的用户名  
        // 调用Mapper对象的countByUsername()执行统计  
        // 判断统计结果是否大于0  
        // 是：抛出异常  
  
        // 参考以上做法，检查手机号码是否被占用  
        // 参考以上做法，检查电子邮箱是否被占用  
  
        // 创建Admin对象  
        // 复制属性  
        // 补全Admin对象的属性值：lastLoginIP(null) / loginCount(0) / gmtLastLogin(null)  
        // TODO 从Admin对象中取出原密码，执行加密，再将密文存入到Admin对象中  
        // 调用Mapper对象的insert()执行插入  
    }  
}
```

具体实现为：
```java
@Slf4j  
@Service  
public class AdminServiceImpl implements AdminService {  
  
    @Autowired  
    AdminMapper adminMapper;  
  
  
    @Override  
    public void addNew(AdminAddNewDTO adminAddNewDTO) {  
        log.debug("开始处理【添加管理员业务】，参数为：{}", adminAddNewDTO);  
  
        // 用户名必须唯一  
        int countByUsernameName = adminMapper.countByUsername(adminAddNewDTO.getUsername());  
        if (countByUsernameName > 0) {  
            String message = "添加管理员失败，用户名已存在！";  
            log.warn(message);  
  
            throw new ServiceException(ServiceCode.ERR_CONFLICT, message);  
        }  
  
        // 手机号码必须唯一  
        int countByPhone = adminMapper.countByPhone(adminAddNewDTO.getPhone());  
        if (countByPhone > 0) {  
            String message = "添加管理员失败，手机号已存在！";  
            log.warn(message);  
  
            throw new ServiceException(ServiceCode.ERR_CONFLICT, message);  
        }  
  
        // 电子邮箱必须唯一  
        int countByEmail = adminMapper.countByEmail(adminAddNewDTO.getEmail());  
        if (countByEmail > 0) {  
            String message = "添加管理员失败，电子邮箱已存在！";  
            log.warn(message);  
  
            throw new ServiceException(ServiceCode.ERR_CONFLICT, message);  
        }  
  
        log.debug("创建Admin对象用来插入，并将用户输入的属性复制给该对象");  
        Admin admin = new Admin();  
        BeanUtils.copyProperties(adminAddNewDTO, admin);  
        admin.setLoginCount(0);  
  
        int insert = adminMapper.insert(admin);  
        if (insert != 1) {   // 如果修改不符合预期，抛出异常，事务性处理  
            String message = "添加管理员失败，服务器忙，请稍后再次尝试！";  
            log.warn(message);  
            throw new ServiceException(ServiceCode.ERR_INSERT, message);  
        }  
    }  
      
}
```


进行测试：
```java
@Test  
void addNew() {  
  
    AdminAddNewDTO adminAddNewDTO = new AdminAddNewDTO();  
    adminAddNewDTO.setUsername("1234");  
    adminAddNewDTO.setPhone("1234");  
    adminAddNewDTO.setEmail("123");  
  
    try {  
        adminService.addNew(adminAddNewDTO);  
    } catch (ServiceException e) {  
        log.debug("{}", e.getMessage());  
    }  
  
}
```