
我们仍然使用 *SpringDataElasticsearch框架* 来操作ES  
  
按照SpringData的规范，我们创建 *包repository*
  
在这个包中创建 *SpuForElasticRepository* 接口，代码如下：
```java
/**  
 * SpuForElastic实体类操作ES的持久层接口  
 * 继承ElasticsearchRepository父接口后，能够直接使用  
 */  
@Repository
public interface SpuForElasticRepository extends ElasticsearchRepository<SpuForElastic, Long> {  
      
}
```

这个接口提供了批量新增到ES数据的方法  
  
但是要想获得数据库中的所有pms_spu表的数据，必须连接数据库查询这些数据  
  
但是search模块是负责管理ES的，所以需要 **Dubbo调用** *Product模块* 获取所有数据


## product模块提供的查询功能

我们需要使用Dubbo调用product的业务逻辑层 *获得 数据库pms_spu表 的数据*。
  
经过观察发现业务逻辑逻辑层调用 *ForFrontSpuServiceImpl类* 中，
  
具有一个getSpuByPage的方法，它 *分页查询* 所有spu信息
- 让服务器的压力小一些，时间拉长一些没关系
```java
@Override  
public JsonPage<Spu> getSpuByPage(Integer pageNum, Integer pageSize) {  
    PageHelper.startPage(pageNum,pageSize);  
    List<Spu> list=spuMapper.findAllList();  
    return JsonPage.restPage(new PageInfo<>(list));  
}
```